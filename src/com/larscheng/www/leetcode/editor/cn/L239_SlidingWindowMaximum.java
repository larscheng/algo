//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ k ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½
//ã€‚ 
//
// è¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3
//è¾“å‡ºï¼š[3,3,5,5,6,7]
//è§£é‡Šï¼š
//æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
//---------------               -----
//[1  3  -1] -3  5  3  6  7       3
// 1 [3  -1  -3] 5  3  6  7       3
// 1  3 [-1  -3  5] 3  6  7       5
// 1  3  -1 [-3  5  3] 6  7       5
// 1  3  -1  -3 [5  3  6] 7       6
// 1  3  -1  -3  5 [3  6  7]      7
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1], k = 1
//è¾“å‡ºï¼š[1]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= nums.length <= 10âµ 
// -10â´ <= nums[i] <= 10â´ 
// 1 <= k <= nums.length 
// 
//
// Related Topics é˜Ÿåˆ— æ•°ç»„ æ»‘åŠ¨çª—å£ å•è°ƒé˜Ÿåˆ— å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 2635 ğŸ‘ 0

package com.larscheng.www.leetcode.editor.cn;


import java.util.*;

public class L239_SlidingWindowMaximum{
      
  public static void main(String[] args) {
       Solution solution = new L239_SlidingWindowMaximum().new Solution();
       solution.maxSlidingWindow(new int[]{1,6,-1,-3,5,3,6,7},3);
  }

    /**
     * å¤§é¡¶å †ï¼Œæ•°ç»„å½¢å¼è®°å½•å…ƒç´ ä¸‹æ ‡å’Œå…ƒç´ å€¼ï¼Œåœ¨å¤§é¡¶å †ä¸­ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œå †é¡¶ä¸ºæœ€å¤§å€¼
     * å½“å †ä¸­å…ƒç´ å¤§äºç­‰äºkæ—¶ï¼Œå–å‡ºå †é¡¶å…ƒç´ ï¼ŒåŒæ—¶åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦åœ¨æ»‘åŠ¨çª—å£èŒƒå›´å†…ï¼š
     * åœ¨çª—å£èŒƒå›´å†…ï¼šè®°å½•å †é¡¶å…ƒç´ 
     * ä¸åœ¨çª—å£èŒƒå›´å†…ï¼šå¼¹å‡ºè¯¥å…ƒç´ ï¼Œç»§ç»­å–åœ¨èŒƒå›´å†…çš„å †é¡¶å…ƒç´ 
     *
     * åˆ¤æ–­æ˜¯å¦åœ¨æ»‘åŠ¨çª—å£å†…ï¼šåˆ¤æ–­å †ä¸­å…ƒç´ çš„ä¸‹æ ‡å€¼æ˜¯å¦å°äºçª—å£å·¦ç«¯å…ƒç´ ä¸‹æ ‡(i-k+1),iä¸ºçª—å£å³ç«¯å…ƒç´ ä¸‹æ ‡
     */
//leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int[] maxSlidingWindow(int[] nums, int k) {
            PriorityQueue<int[]> queue = new PriorityQueue<>((o1, o2) -> o2[1] - o1[1]);
            int[] result = new int[nums.length - k + 1];
            int index = 0;
            for (int i = 0; i < nums.length; i++) {
                queue.offer(new int[]{i, nums[i]});
                if (queue.size() >= k) {
                    //æœ€å¤§å€¼åœ¨çª—å£å¤–ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒ
                    while (queue.peek()[0] < i - k + 1) {
                        queue.poll();
                    }
                    //å–å‡ºæœ€å¤§å€¼ï¼Œæ”¾å…¥æ–°æ•°ç»„
                    result[index++] = queue.peek()[1];
                }
            }
            return result;
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

    class Solution1 {
        /**
         * å¤§é¡¶å †å®ç°éœ€è¦åœ¨çª—å£ä¸­ç»´æŠ¤å®Œæ•´çš„kä¸ªå…ƒç´ ï¼Œä½†å®é™…ä¸Šæ»‘åŠ¨è¿‡ç¨‹ä¸­å¦‚æœæ–°å…ƒç´ å¤§äºçª—å£ä¸­æ‰€æœ‰åŸæœ¬çš„å…ƒç´ ï¼Œæœ€ç»ˆçš„æœ‰æ•ˆç»“æœåªä¼šæ˜¯æ–°å…ƒç´ 
         * æ‰€ä»¥è¿™ç§æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åªä¿ç•™è¿™ä¸ªæœ€å¤§å…ƒç´ åœ¨çª—å£ä¸­ï¼Œæœ€ç»ˆæ»‘åŠ¨çª—å£ä¸­çš„å…ƒç´ ä¼šå½¢æˆä¸€ä¸ªå•è°ƒé€’å‡è¶‹åŠ¿
         * å¯ä»¥é€šè¿‡åŒç«¯é˜Ÿåˆ—æ¥ä¿å­˜æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ä¸‹æ ‡
         * å³ç§»æ—¶åˆ¤æ–­æ–°å…ƒç´ ä¸è€å…ƒç´ çš„å¤§å°ï¼Œåªä¿ç•™å¤§äºæ–°å…ƒç´ çš„æ•°
         * å³ç§»è¿‡ç¨‹ä¸­ç»´æŠ¤æœ€å·¦ä¾§çª—å£å¤–å¤±æ•ˆå…ƒç´ çš„ç§»é™¤ï¼Œæœ€ç»ˆå–å‡ºçª—å£å†…æœ€å·¦ç«¯å…ƒç´ å³å¯
         */
        public int[] maxSlidingWindow(int[] nums, int k) {
            int[] result = new int[nums.length - k + 1];
            int index = 0;
            Deque<Integer> deque = new ArrayDeque<>();
            for (int i = 0; i < nums.length; i++) {
                //å½“å‰å…ƒç´ å¤§äºçª—å£å†…å…ƒç´ ï¼Œæ¸…é™¤çª—å£å…ƒç´ 
                while (!deque.isEmpty() && nums[i] >= nums[deque.peekLast()]) {
                    deque.pollLast();
                }
                deque.addLast(i);
                //çª—å£æ”¶ç¼©ï¼Œå°äºå·¦ç«¯ç‚¹ï¼ˆi - k + 1ï¼‰éƒ½ç§»é™¤
                while (!deque.isEmpty() && deque.peekFirst() < i - k + 1) {
                    deque.pollFirst();
                }
                //å½“å‰ä¸‹æ ‡å¤§äºç­‰äºçª—å£å¤§å°æ—¶ï¼Œå¼€å§‹æ”¶é›†ç»“æœ
                if (i >= k - 1) {
                    result[index++] = nums[deque.peekFirst()];
                }
            }
            return result;
        }
    }
}