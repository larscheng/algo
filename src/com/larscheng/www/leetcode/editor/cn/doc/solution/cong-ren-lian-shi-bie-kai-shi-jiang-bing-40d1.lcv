å¹¶æŸ¥é›†æ¨¡æ¿é¢˜ã€‚

åˆå§‹æ—¶ï¼Œæ¯å°è®¡ç®—æœºæ„æˆä¸€ä¸ªç½‘ç»œï¼Œå³æœ‰ N ä¸ªç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œæœ‰ä¸”åªæœ‰ä¸€å°è®¡ç®—æœºã€‚

éå† connectionsï¼Œå¯¹ä¸¤å°è¿æ¥çš„è®¡ç®—æœºè°ƒç”¨ merge(u, v)ï¼š
* å¦‚æœmergeæˆåŠŸï¼Œåˆ™ç½‘ç»œæ•°é‡å‡ä¸€ã€‚
* å¦‚æœä¸æˆåŠŸï¼Œåˆ™å¯ä»¥æ‹”å‡ºçš„ç”µç¼†æ•°åŠ ä¸€ã€‚

æœ€ç»ˆæ¯”è¾ƒç”µç¼†æ•°å’Œç½‘ç»œæ•°å³å¯ã€‚

* cpp

```cpp
std::vector<int> fa;
void init(int N) {
	fa.resize(N);
	for (int i = 0; i < N; i++) {
		fa[i] = i;
	}
}
int find(int x) {
	int r = x;
	while(fa[r] != r) {
		r = fa[r];
	}
	while(fa[x] != x) {
		int t = fa[x];
		fa[x] = r;
		x = t;
	}
	return x;
}
bool merge(int u, int v) {
	int ru = find(u);
	int rv = find(v);
    if (ru == rv) {
        return false;
    }
	fa[ru] = rv;
    return true;
}
class Solution {
public:
    int makeConnected(int n, vector<vector<int>>& connections) {
        int removeCount = 0;
        int needConnectCount = n-1;

        init(n);

        for (const auto &p : connections) {
            if (merge(p[0], p[1])) {
                needConnectCount--;
            } else {
                removeCount++;
            }
        }
        if (removeCount < needConnectCount) {
            return -1;
        }
        return needConnectCount; 
    }
};
```

---

ä»¥ä¸‹æ˜¯å¹¶æŸ¥é›†çš„è®²è§£ï¼Œå–œæ¬¢çš„è€é“ç‚¹ä¸ªèµğŸ‘å§
---------------------

æœ¬æ–‡å°†å‘ˆç°å¦‚ä¸‹å†…å®¹ï¼š
* ä¸€ä¸ªåœ¨å®é™…å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜
* ç”¨ C++ å®ç°ä¸€ä¸ªå¹¶æŸ¥é›†
* è·¯å¾„å‹ç¼©

## å¹¶æŸ¥é›†å’Œäººè„¸èšç±»æœ‰å•¥å…³ç³»

#### è®²è®²éœ€æ±‚

ä»¥å‰åœ¨å›½å†…æŸå®¶AIç‹¬è§’å…½å·¥ä½œçš„æ—¶å€™ï¼Œé‡åˆ°è¿‡è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šéœ€è¦å¯¹åƒä¸‡é‡çº§çš„äººè„¸æŠ“æ‹å›¾è¿›è¡Œèšç±»ã€‚

ç®—æ³•åŒäº‹æä¾›äº†ä¸€ä¸ªè¿‡æ»¤å™¨ï¼šè¾“å…¥ä¸¤å¼ æŠ“æ‹å›¾ï¼Œå¦‚æœè¿”å› trueï¼Œåˆ™è¯´æ˜ä¸¤å¼ æŠ“æ‹æ¥è‡ªäºåŒä¸€ä¸ªäººï¼›å¦‚æœè¿”å› falseï¼Œåˆ™è¯´æ˜æ— æ³•åˆ¤å®šä¸¤è€…çš„å…³ç³»ã€‚

è¯´çš„ä¸æ¸…æ¥šï¼Ÿåˆ«ç€æ€¥ï¼Œæ¥çœ‹ä¸¤ä¸ªä¾‹å­ï¼š
* ä¸¤å¼ æ¯”è¾ƒç›¸ä¼¼çš„æŠ“æ‹ï¼Œè¿‡æ»¤å™¨ä¼šè¿”å›Trueã€‚~~è¦æ˜¯è¿™éƒ½æä¸å®šï¼Œç®—æ³•åŒäº‹å¯ä»¥æå‰é€€ä¼‘äº†~~
  ![image.png](https://pic.leetcode-cn.com/1607782249-bfcxDo-image.png)
* ä¸¤å¼ å·®è·è¾ƒå¤§çš„æŠ“æ‹ï¼Œè¿‡æ»¤å™¨æä¸å®šäº†ã€‚
  ![image.png](https://pic.leetcode-cn.com/1607782283-nNzIuk-image.png)

å…¶å®æŠ“æ‹å›¾é›†ä¸­ï¼Œç»å¤§å¤šæ•°éƒ½æ˜¯ç¬¬äºŒç§æƒ…å†µï¼šæ¥è‡ªåŒä¸€ä¸ªäººçš„æŠ“æ‹ï¼Œä½†æ˜¯ç”±äºè§’åº¦ï¼Œè¡¨æƒ…ç­‰é—®é¢˜ï¼Œåšä¸åˆ°ç²¾å‡†è¯†åˆ«ã€‚

#### å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„

ç”±äºæŠ“æ‹å›¾é›†ä¸­å¤§éƒ½æ˜¯æ—¶é—´é—´éš”å¾ˆçŸ­çš„æŠ“æ‹ï¼Œç±»ä¼¼äºä¸‹é¢è¿™ç§ï¼š
![image.png](https://pic.leetcode-cn.com/1607782309-jPbeiA-image.png)

å·¥ç¨‹å¸ˆä»¬çµæœºä¸€åŠ¨ï¼šå¦‚æœæŠŠæŠ“æ‹çœ‹åšç‚¹ï¼Œæ¥è‡ªåŒä¸€äººçš„æŠ“æ‹ä¹‹é—´è¿ä¸€æ¡è¾¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€å¼ æ— å‘å›¾ï¼Œç„¶åè®¡ç®—è¿™å¼ æ— å‘å›¾çš„è¿é€šåˆ†é‡ä¸å°±å¾—äº†å—ï¼Ÿ

![image.png](https://pic.leetcode-cn.com/1607782492-wrIUwH-image.png)

ä¸€å…± N å¼ å›¾ç‰‡ï¼Œä»»æ„ä¸¤å¼ ä¹‹é—´éƒ½éœ€åˆ¤å®šæ˜¯å¦æ¥è‡ªåŒä¸€äººï¼Œæ€»å…±éœ€è¦åˆ¤å®š$\frac{N*(N-1)}{2}$æ¬¡ã€‚å¾—åˆ°æ— å‘å›¾åç›´æ¥è®¡ç®—è¿é€šåˆ†é‡å³å¯ã€‚

çœ‹ä¸Šå»è¿˜ä¸é”™ï¼Œä½†ç°åœ¨åˆæœ‰äº†æ–°éœ€æ±‚ï¼šæŸ¥è¯¢æŠ“æ‹é›†åˆä¸­çš„ä¸¤å¼ æŠ“æ‹æ˜¯å¦æ¥è‡ªåŒä¸€äººï¼Œå¯ä»¥O(1)çš„ç»™å‡ºç­”æ¡ˆå—ï¼Ÿ

åŸºäºè¿é€šåˆ†é‡çš„åšæ³•ä¹Ÿå¯ä»¥ï¼š
* ä¸ºæ¯ä¸ªè¿é€šåˆ†é‡åˆ†é…ä¸€ä¸ª IDã€‚
* æ¯ä¸ªæŠ“æ‹è®°å½•æ‰€å±è¿é€šåˆ†é‡çš„IDã€‚
* å¯¹äºä¸€æ¬¡æŸ¥è¯¢ï¼Œç›´æ¥æ¯”è¾ƒä¸¤å¼ æŠ“æ‹çš„è¿é€šåˆ†é‡çš„IDå³å¯ã€‚

ä½†æ˜¯æœ‰ç‚¹å•°å—¦ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€ç§æ›´**ç®€å•ä¼˜é›…**çš„åšæ³•ã€‚

## ã€Œäººè„¸èšç±»ã€æŠ½è±¡ä¸ºã€Œé›†åˆåˆå¹¶ã€

ä¸Šé¢ã€Œæ„é€ æ— å‘å›¾+è¿é€šåˆ†é‡ã€çš„åšæ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨**æ„é€ Mä¸ªé›†åˆï¼Œæ¯ä¸ªé›†åˆç”±ä¸€ä¸ªæ•´æ•°æ ‡è¯†(å³è¿é€šåˆ†é‡çš„ID)ã€‚å½’å±äºåŒä¸€é›†åˆçš„ç‚¹ï¼Œä»£è¡¨å…¶å¯¹åº”çš„æŠ“æ‹æ¥è‡ªäºåŒä¸€ä¸ªäºº**ã€‚

æ—¢ç„¶æ˜¯**æ„é€ é›†åˆ**ï¼Œé‚£æŠŠ**äººè„¸èšç±»çš„è¿‡ç¨‹**æŠ½è±¡æˆ**é›†åˆåˆå¹¶çš„è¿‡ç¨‹**åº”è¯¥å¾ˆåˆé€‚å§ã€‚

åˆå§‹æ—¶ï¼Œ**æ¯å¼ æŠ“æ‹éƒ½æ„æˆäº†ä¸€ä¸ªç‹¬ç«‹çš„é›†åˆ**ã€‚ABCDEä»£è¡¨å›¾ç‰‡çš„ç¼–å·ï¼Œ12345ä»£è¡¨é›†åˆçš„ç¼–å·ï¼Œç®­å¤´ä»£è¡¨å½’å±å…³ç³»ã€‚
![image.png](https://pic.leetcode-cn.com/1607782530-hdRHkJ-image.png)

æ¥ä¸‹æ¥ï¼Œåˆ¤æ–­ä»»æ„ä¸¤å¼ æŠ“æ‹ä¼šå¦æ¥è‡ªåŒä¸€äººã€‚ç¬¬ä¸€è½®ï¼Œä¾æ¬¡åˆ¤æ–­$(A,B), (A,C), (A,D), (A,E)$ã€‚

å› ä¸º$(A,B),(A,C)$è¢«è¿‡æ»¤å™¨è¯†åˆ«ä¸º Trueï¼Œæ‰€ä»¥åˆå¹¶**é›†åˆ1ï¼Œ2**åŠ**é›†åˆ1ï¼Œ3**ã€‚

**åˆ é™¤æˆ–ä¿ç•™å“ªä¸ªé›†åˆå¹¶ä¸é‡è¦ï¼Œå› ä¸ºé›†åˆçš„IDæ— æ„ä¹‰ï¼Œæˆ‘ä»¬åªæ˜¯è¦æ±‚å‡ºå“ªäº›æŠ“æ‹åœ¨åŒä¸€é›†åˆã€‚**
![image.png](https://pic.leetcode-cn.com/1607782545-IZGgot-image.png)

æ¥ä¸‹æ¥ï¼Œä¾æ¬¡åˆ¤æ–­$(B,C)ï¼Œ(B,D)ï¼Œ(B,E)$ã€‚å› ä¸ºåªæœ‰$(B,C)$è¿”å›äº†Trueï¼Œæ‰€ä»¥æ²¡æœ‰å‘ç”Ÿåˆå¹¶ã€‚

å†æ¥ä¸‹æ¥ï¼Œä¾æ¬¡åˆ¤æ–­$(C,D)ï¼Œ(C,E)$ã€‚å› ä¸ºéƒ½è¿”å›äº†Trueï¼Œæ‰€ä»¥ä¾æ¬¡**åˆå¹¶é›†åˆ1ï¼Œ4**åŠ**é›†åˆ1ï¼Œ5**ã€‚
![image.png](https://pic.leetcode-cn.com/1607782562-fwBtvn-image.png)

è‡³æ­¤ï¼Œèšç±»çš„è¿‡ç¨‹å°±ç»“æŸäº†ã€‚é‚£å¦‚ä½•å¿«é€ŸæŸ¥è¯¢ä¸¤å¼ æŠ“æ‹æ˜¯å¦æ¥è‡ªåŒä¸€äººå‘¢ï¼Ÿè¿™ä¸ªå¤ªç®€å•äº†ï¼Œç›´æ¥æ¯”è¾ƒæ‰€å±é›†åˆIDæ˜¯å¦ç›¸åŒå³å¯ã€‚

å…¶å®ï¼Œä¸Šè¿°è¿‡ç¨‹å°±æ˜¯å¹¶æŸ¥é›†çš„ä¸¤ä¸ªæœ€é‡è¦çš„æ“ä½œï¼š
* **merge(u,v)**ï¼šåˆå¹¶ u ï¼Œv æ‰€åœ¨çš„é›†åˆã€‚
* **find(x)**ï¼šè¿”å› x æ‰€å±é›†åˆçš„IDã€‚

## å®ç°ä¸€ä¸ªå¹¶æŸ¥é›†

#### å¦‚ä½•å­˜å‚¨æ•°æ®

è¦å®ç° merge å’Œ find å‡½æ•°ï¼Œå°±è¦å…ˆæƒ³å¥½å¦‚ä½•å­˜å‚¨æ•°æ®ã€‚

ä¸åŠ ä»»ä½•ä¼˜åŒ–ï¼Œæœ€æœ´ç´ çš„å¹¶æŸ¥é›†ä½¿ç”¨**ã€Œæ£®æ—ã€**å­˜å‚¨æ•°æ®ã€‚æ£®æ—ï¼Œå³è‹¥å¹²æ£µæ ‘ç»„æˆã€‚**æ¯æ£µæ ‘ä»£è¡¨ä¸€ä¸ªé›†åˆï¼Œæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå…ƒç´ **ã€‚

å¦‚æœç”¨è¿ç»­çš„æ•´æ•°å¯¹å…ƒç´ è¿›è¡Œç¼–å·ã€‚æ¯”å¦‚æœ‰Nä¸ªå…ƒç´ ï¼Œåˆ™ä¾æ¬¡åˆ†é…IDä¸º 0,1,2...N-1ã€‚

ä¸ºäº†æ–¹ä¾¿å®ç°ï¼Œæˆ‘ä»¬å°† **ã€Œæ ¹èŠ‚ç‚¹çš„IDã€** ä½œä¸º **ã€Œé›†åˆçš„IDã€**ã€‚ç°åœ¨å¯è¿™æ ·å®ç°ä¸¤ä¸ªå‡½æ•°ï¼š
* find(x) ï¼šé€šè¿‡ x çš„çˆ¶èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ ... ...ï¼Œä¸€ç›´æ‰¾åˆ°æ ¹èŠ‚ç‚¹å¹¶è¿”å›å…¶IDã€‚
* merge(u,v)ï¼šé€šè¿‡ find å‡½æ•°æ‰¾åˆ° uï¼Œv çš„æ ¹èŠ‚ç‚¹ root_u, root_vã€‚å¦‚æœä¸¤è€…çš„æ ¹èŠ‚ç‚¹ä¸ç›¸åŒï¼Œåˆ™å°† root_u çš„çˆ¶èŠ‚ç‚¹è®¾ä¸º root_vã€‚å¦‚æœç›¸åŒï¼Œåˆ™æ— éœ€ä»»ä½•æ“ä½œã€‚

å¦‚ä¸Šæ‰€è¿°ï¼Œå¯ä»¥å‘ç°å¹¶æŸ¥é›†**ä¸å…³å¿ƒèŠ‚ç‚¹æœ‰å“ªäº›å„¿å­**ï¼Œ**åªå…³å¿ƒèŠ‚ç‚¹çš„çˆ¶äº²æ˜¯è°**ï¼Œæ‰€ä»¥å¹¶æŸ¥é›†åªéœ€è¦ä¸€ä¸ªæ•°ç»„ï¼š

* cpp

```cpp
std::vector<int> fa;
```

fa[i] è®°å½•èŠ‚ç‚¹ i çš„çˆ¶èŠ‚ç‚¹ï¼› **ç‰¹æ®Šçš„ï¼Œå½“ i æ˜¯æ ¹èŠ‚ç‚¹æ—¶ï¼Œfa[i] çš„å€¼ä¸º i** ã€‚åˆå§‹æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ„æˆäº†ä¸€æ£µæ ‘ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥åˆå§‹åŒ–éœ€è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

* cpp

```cpp
void init(int N) {
	fa.resize(N);
	for (int i = 0; i < N; i++) {
		fa[i] = i;
	}
}
```

#### find å‡½æ•°

åŸºäº fa æ•°ç»„ï¼Œå¾ˆå®¹æ˜“å®ç° find å‡½æ•°ï¼Œ**ä¸€ä¸ª while æå®š**ï¼š

* cpp

```cpp
int find(int x) {
	while(fa[x] != x) {
		x = fa[x];
	}
	return x;
}
```

![image.png](https://pic.leetcode-cn.com/1607782641-jwOWaE-image.png)
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç®­å¤´ä»£è¡¨ fa æ•°ç»„ï¼Œæ¯”å¦‚$fa_5=2,fa_2=1,fa_1=1$ã€‚

å½“è°ƒç”¨ find(5) æ—¶ï¼ŒæŒ‰ç…§ $5â†’2â†’1$ çš„è·¯å¾„åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼Œæœ€ç»ˆè¿”å› 1ã€‚

#### merge å‡½æ•°

åŸºäº find(x) å‡½æ•°ï¼Œå®ç° merge(u,v) ä¹Ÿå¾ˆç®€å•ï¼šé€šè¿‡ find å‡½æ•°æ‰¾åˆ° uï¼Œv çš„æ ¹èŠ‚ç‚¹ root_u, root_vã€‚å¦‚æœä¸¤è€…çš„æ ¹èŠ‚ç‚¹ä¸ç›¸åŒï¼Œåˆ™å°† root_u çš„çˆ¶èŠ‚ç‚¹è®¾ä¸º root_vã€‚å¦‚æœç›¸åŒï¼Œåˆ™æ— éœ€ä»»ä½•æ“ä½œã€‚

* cpp

```cpp
void merge(int u, int v) {
	int ru = find(u);
	int rv = find(v);
	fa[ru] = rv;
}
```

ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰å¦‚ä¸‹ä¸¤æ£µæ ‘ï¼Œè°ƒç”¨ merge(8, 5) æ—¶ï¼š
* å…ˆé€šè¿‡ find(8), find(5) æ‰¾åˆ°å¯¹åº”çš„æ ¹èŠ‚ç‚¹ 7 å’Œ 1
* å†å°† fa[7] ä¿®æ”¹ä¸º 1ã€‚
  ![image.png](https://pic.leetcode-cn.com/1607782662-UYivra-image.png)
  ![image.png](https://pic.leetcode-cn.com/1607782673-jODliE-image.png)
  è‡³æ­¤ï¼Œ~~ç®€ç‰ˆçš„~~å¹¶æŸ¥é›†çš„æ‰€æœ‰ä»£ç éƒ½æå®Œäº†ã€‚

## å¹¶æŸ¥é›†çš„è¿›åŒ–ï¼šè·¯å¾„å‹ç¼©

ä¸Šè¿°ä»£ç çœ‹ä¼¼ç®€ç»ƒä¼˜é›…ï¼Œä½†æ€§èƒ½æä¸ç¨³å®šã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼š

* cpp

```cpp
int N = 1000;
init(N);
for (int i = 1; i < N; i++) {
	merge(i-1, i);
}
```

![image.png](https://pic.leetcode-cn.com/1607782691-QJIjWC-image.png)
æ­¤æ—¶ï¼Œfa ä¼šé€€åŒ–æˆä¸€ä¸ªé•¿é•¿çš„é“¾è¡¨ï¼Œ**find(x) çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)**ã€‚

ä¸ºäº†é¿å…å‡ºç°æ·±åº¦è¿‡å¤§çš„æ ‘ï¼Œç¨³å®š find(x) çš„æ—¶é—´å¤æ‚ï¼Œå¤§ä½¬ä»¬æå‡ºäº† ã€Œè·¯å¾„å‹ç¼©ã€çš„æ–¹æ¡ˆã€‚
![image.png](https://pic.leetcode-cn.com/1607782703-YwVYFI-image.png)
å†æ¥åˆ†æä¸‹ find å’Œ merge è¿™ä¸¤ä¸ªå‡½æ•°ï¼š
* find(x)ï¼šå€ŸåŠ© fa æ•°ç»„ï¼Œ**æ‰¾åˆ° x çš„æ ¹èŠ‚ç‚¹**ã€‚
* merge(u, v)ï¼š**æ‰¾åˆ° uï¼Œv çš„æ ¹èŠ‚ç‚¹ ruï¼Œrv**ï¼Œç„¶åæ‰§è¡Œ fa[ru] = rvã€‚

ä¸éš¾å‘ç°ï¼Œå¹¶æŸ¥é›†å…¶å®ä¹Ÿä¸å…³å¿ƒèŠ‚ç‚¹çš„çˆ¶äº²æ˜¯è°ï¼Œå®ƒçœŸæ­£å…³å¿ƒçš„æ˜¯ **ã€ŒèŠ‚ç‚¹çš„æ ¹æ˜¯è°ã€**ã€‚æ—¢ç„¶è¿™æ ·ï¼Œ**fa[i] ç›´æ¥è®°å½•èŠ‚ç‚¹ i çš„æ ¹** ä¸å°±å¾—äº†å˜›ã€‚è¿™å°±æ˜¯ã€Œè·¯å¾„å‹ç¼©ã€çš„æ ¸å¿ƒæ€æƒ³ã€‚

æ¥ä¸‹æ¥ï¼Œå®ç°ä¸€ä¸‹ã€Œè·¯å¾„å‹ç¼©ç‰ˆã€çš„ find å‡½æ•°ï¼Œ**ä¸¤ä¸ª while å°±èƒ½æå®š**ï¼š

* cpp

```cpp
int find(int x) {
	int r = x;
	while(fa[r] != r) {
		r = fa[r];
	}
	while(fa[x] != x) {
		int t = fa[x];
		fa[x] = r;
		x = t;
	}
	return x;
}
```

è§£é‡Šä¸€ä¸‹ä¸¤ä¸ª whileï¼š
* **ç¬¬ä¸€ä¸ª while**ï¼šæ‰¾åˆ° x æ‰€åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹ r ã€‚
* **ç¬¬äºŒä¸ª while**ï¼šå°† x â†’ r è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„ fa æ›´æ–°ä¸º rã€‚

![image.png](https://pic.leetcode-cn.com/1607782733-VvBQUO-image.png)

æœ‰å¦‚ä¸Šå·¦å›¾æ‰€ç¤ºçš„ä¸€æ£µæ ‘ï¼Œè°ƒç”¨ find(5)ï¼š
* **ç¬¬ä¸€ä¸ª while**ï¼šå…ˆæ‰¾åˆ°èŠ‚ç‚¹ 5 æ‰€åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹ 1ã€‚
* **ç¬¬äºŒä¸ª while**ï¼šå°† 5 â†’ 1è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„ fa æ›´æ–°ä¸º 1ï¼Œå¦‚ä¸Šå³å›¾æ‰€ç¤ºã€‚

**å…¶å®ï¼Œä»¥ä¸Šå°±æ˜¯è·¯å¾„å‹ç¼©çš„å…¨éƒ¨äº†ã€‚merge å‡½æ•°å®Œå…¨ä¸ç”¨ä¿®æ”¹ã€‚**

éšç€ find å‡½æ•°çš„ä¸æ–­è°ƒç”¨ï¼Œæ‰€æœ‰æ ‘çš„æ·±åº¦éƒ½å°†è¶‹è¿‘äº 2ï¼Œå³**æ‰€æœ‰çš„ fa[i] çš„å€¼éƒ½å°†å˜ä¸ºå…¶æ‰€åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹çš„ID**ã€‚

## å¤æ‚åº¦åˆ†æ

#### ç©ºé—´å¤æ‚åº¦

å› ä¸ºå¹¶æŸ¥é›†åªæœ‰ä¸€ä¸ª fa æ•°ç»„ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚

#### æ—¶é—´å¤æ‚åº¦

å› ä¸ºå¹¶æŸ¥é›†ä½¿ç”¨æ ‘è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥å¹¶æŸ¥é›†æœ€å¤šæœ‰ N-1 æ¡è¾¹ã€‚

éšç€ã€Œè·¯å¾„å‹ç¼©ã€çš„å¼•å…¥ï¼Œæ‰€æœ‰ **ã€Œæ²¡æœ‰ç›´è¿åˆ°æ ¹èŠ‚ç‚¹çš„è¾¹ã€** åœ¨ **ç¬¬ä¸€æ¬¡** è¢« find è®¿é—®çš„æ—¶å€™å°±ä¼š**è¢«å‹ç¼©**ã€‚

æ‰€ä»¥ï¼Œéšç€ find ä¸æ–­è¢«è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ **ã€Œå‡æ‘Šäº†è·¯å¾„å‹ç¼©çš„æ—¶é—´æˆæœ¬ã€**ï¼Œæœ€ç»ˆï¼Œfind çš„æ—¶é—´å¤æ‚åº¦ä¼šç¨³å®šåœ¨ O(1)ã€‚

å› ä¸º merge æ‰§è¡Œäº†ä¸¤æ¬¡ findï¼Œ ä¸€æ¬¡èµ‹å€¼ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æœ€ç»ˆä¹Ÿä¼šç¨³å®šåœ¨ O(1)ã€‚

## å‡ ä¸ªä¾‹é¢˜

* https://leetcode-cn.com/problems/friend-circles/
* https://leetcode-cn.com/problems/number-of-operations-to-make-network-connected/
* https://leetcode-cn.com/problems/number-of-islands/

![image.png](https://pic.leetcode-cn.com/1598770500-jZYWgm-image.png)
