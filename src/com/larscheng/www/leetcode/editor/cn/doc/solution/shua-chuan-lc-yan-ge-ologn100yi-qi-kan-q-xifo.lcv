## æœ´ç´ è§£æ³•

ä½†å‡¡æ˜¯ä»æœ‰åºåºåˆ—ä¸­æ‰¾æŸä¸ªæ•°ï¼Œæˆ‘ä»¬ç¬¬ä¸€ååº”åº”è¯¥æ˜¯ã€ŒäºŒåˆ†ã€ã€‚

è¿™é“é¢˜æ˜¯ä¸€ä¸ªåŸæœ¬æœ‰åºçš„æ•°ç»„åœ¨æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ï¼Œå…¶å®å°±æ˜¯å°†åŸæœ¬ä¸€æ®µå‡åºçš„æ•°ç»„åˆ†ä¸ºäº†ä¸¤æ®µã€‚

æˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ°æ—‹è½¬ç‚¹ `idx`ï¼Œç„¶åå¯¹ `idx` å‰åè¿›è¡Œã€ŒäºŒåˆ†ã€ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    public int search(int[] nums, int target) {
        int n = nums.length;
        int idx = 0;
        for (int i = 0; i < n - 1; i++) {
            if (nums[i] > nums[i + 1]) {
                idx = i;
                break;
            }
        }
        int ans = find(nums, 0, idx, target);
        if (ans != -1) return ans;
        if (idx + 1 < n) ans = find(nums, idx + 1, n - 1, target);
        return ans;
    }
    int find(int[] nums, int l, int r, int target) {
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] >= target) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }
        return nums[l] == target ? l : -1;
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼šå…ˆå¯¹æ•°ç»„è¿›è¡Œä¸€æ¬¡éå†ï¼Œæ‰¾åˆ° `idx`ï¼Œå¤æ‚åº¦ä¸º $O(n)$ï¼Œå¯¹ `idx` å‰åè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¤æ‚åº¦ä¸º $O(\log{n})$ã€‚æ•´ä½“ä¸º $O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## äºŒåˆ†è§£æ³•

ä¸éš¾å‘ç°ï¼Œè™½ç„¶åœ¨æœ´ç´ è§£æ³•ä¸­æˆ‘ä»¬åº”ç”¨äº†ã€ŒäºŒåˆ†ã€æŸ¥æ‰¾ã€‚

ä½†ç†è®ºå¤æ‚åº¦ä¸º $O(n)$ï¼Œå®é™…å¤æ‚åº¦ä¹Ÿè¿œè¾¾ä¸åˆ° $O(\log{n})$ï¼Œæ‰§è¡Œæ•ˆç‡å–å†³äºæ—‹è½¬ç‚¹ `idx` æ‰€åœ¨æ•°ç»„çš„ä¸‹æ ‡ä½ç½®ã€‚

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å®ç° $O(\log{n})$ çš„è§£æ³•å‘¢ï¼Ÿ

è¿™é“é¢˜å…¶å®æ˜¯è¦æˆ‘ä»¬æ˜ç¡®ã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯ä»€ä¹ˆã€‚

ã€ŒäºŒåˆ†ã€ä¸æ˜¯å•çº¯æŒ‡ä»æœ‰åºæ•°ç»„ä¸­å¿«é€Ÿæ‰¾æŸä¸ªæ•°ï¼Œè¿™åªæ˜¯ã€ŒäºŒåˆ†ã€çš„ä¸€ä¸ªåº”ç”¨ã€‚

**ã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯ä¸¤æ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚**

ç»è¿‡æ—‹è½¬çš„æ•°ç»„ï¼Œæ˜¾ç„¶å‰åŠæ®µæ»¡è¶³ `>= nums[0]`ï¼Œè€ŒååŠæ®µä¸æ»¡è¶³ `>= nums[0]`ã€‚æˆ‘ä»¬å¯ä»¥ä»¥æ­¤ä½œä¸ºä¾æ®ï¼Œé€šè¿‡ã€ŒäºŒåˆ†ã€æ‰¾åˆ°æ—‹è½¬ç‚¹ã€‚

![0.png](https://pic.leetcode-cn.com/1611652146-DwiKES-0.png)

æ‰¾åˆ°æ—‹è½¬ç‚¹ä¹‹åï¼Œå†é€šè¿‡æ¯”è¾ƒ `target` å’Œ `nums[0]` çš„å¤§å°ï¼Œç¡®å®š `target` è½åœ¨æ—‹è½¬ç‚¹çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ã€‚

**ä»£ç ï¼ˆ æ„Ÿè°¢ [@ğŸ­å¯ä¹å¯ä¹å—QAQ](/u/littletime_cc/) æä¾›çš„ c++ ç‰ˆæœ¬ï¼‰ï¼š**

* []

```Java
class Solution {
    public int search(int[] nums, int target) {
        int n = nums.length;
        if (n == 0) return -1;
        if (n == 1) return nums[0] == target ? 0 : -1;

        // ç¬¬ä¸€æ¬¡ã€ŒäºŒåˆ†ã€ï¼šä»ä¸­é—´å¼€å§‹æ‰¾ï¼Œæ‰¾åˆ°æ»¡è¶³ >=nums[0] çš„åˆ†å‰²ç‚¹ï¼ˆæ—‹è½¬ç‚¹ï¼‰
        int l = 0, r = n - 1;
        while (l < r) {
            int mid = l + r + 1 >> 1;
            if (nums[mid] >= nums[0]) {
                l = mid;
            } else {
                r = mid - 1;
            }
        }

        // ç¬¬äºŒæ¬¡ã€ŒäºŒåˆ†ã€ï¼šé€šè¿‡å’Œ nums[0] è¿›è¡Œæ¯”è¾ƒï¼Œå¾—çŸ¥ target æ˜¯åœ¨æ—‹è½¬ç‚¹çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹
        if (target >= nums[0]) {
            l = 0;
        } else {
            l = l + 1;
            r = n - 1;
        }
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] >= target) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }

        return nums[r] == target ? r : -1;
    }
}
```

* []

```C++
class Solution {
public:
    int search(vector<int>& nums, int target) {
        int n = nums.size();
        int l = 0, r = n - 1;
        while(l < r){
            int mid = l + r + 1 >> 1;
            if(nums[mid] >= nums[0]){
                l = mid;
            }
            else r = mid - 1;
        }
        if(target >= nums[0]){
            l = 0;
        }
        else{
            l = l + 1;
            r = n - 1;
        }
        while(l < r){
            int mid = l + r >> 1;
            if(nums[mid] >= target){
                r = mid;
            }
            else l = mid + 1;
        }
        return (nums[r] == target ? r : -1);
    }
};
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

***

## å…¶ä»–ã€ŒäºŒåˆ†ã€ç›¸å…³é¢˜è§£

* äºŒåˆ†æ¨¡æ¿
  [29. ä¸¤æ•°ç›¸é™¤](https://leetcode-cn.com/problems/divide-two-integers/) : [äºŒåˆ† + å€å¢ä¹˜æ³•è§£æ³•ï¼ˆå«æ¨¡æ¿ï¼‰](https://leetcode-cn.com/problems/divide-two-integers/solution/shua-chuan-lc-er-fen-bei-zeng-cheng-fa-j-m73b/)

* äºŒåˆ†æœ¬è´¨ & æ¢å¤äºŒæ®µæ€§å¤„ç†

  [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆæ‰¾ç›®æ ‡å€¼ï¼‰](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/) : [ä¸¥æ ¼ O(logN)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/shua-chuan-lc-yan-ge-ologn100yi-qi-kan-q-xifo/)

  [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ IIï¼ˆæ‰¾ç›®æ ‡å€¼ï¼‰](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/) : [è¯¦è§£ä¸ºä½•å…ƒç´ ç›¸åŒä¼šå¯¼è‡´ O(n)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/solution/gong-shui-san-xie-xiang-jie-wei-he-yuan-xtam4/)

  [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆæ‰¾æœ€å°å€¼ï¼‰](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/) : [ä¸¥æ ¼ O(logN)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/gong-shui-san-xie-yan-ge-olognyi-qi-kan-6d969/)

  [154. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ IIï¼ˆæ‰¾æœ€å°å€¼ï¼‰](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/) : [è¯¦è§£ä¸ºä½•å…ƒç´ ç›¸åŒä¼šå¯¼è‡´ O(n)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/solution/gong-shui-san-xie-xiang-jie-wei-he-yuan-7xbty/)

* äºŒåˆ† check å‡½æ•°å¦‚ä½•ç¡®å®š
  [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/) : [è€ƒå¯Ÿå¯¹ã€ŒäºŒåˆ†ã€çš„ç†è§£ï¼Œä»¥åŠ check å‡½æ•°çš„ã€Œå¤§äº å°äºã€æ€ä¹ˆå†™](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/solution/gong-shui-san-xie-kao-cha-dui-er-fen-de-86bk0/)

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£
